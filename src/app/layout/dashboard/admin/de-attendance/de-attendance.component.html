<mat-card class="mb-20">
    <mat-card-content>
        <mat-card-title>
          Attendance&nbsp;
         <i [ngClass]="{'fa fa-cog fa-spin':loading}" color="primary"> </i>

         <a class="title" href="http://tradetracker.com.pk/" target="_blank">
            <img width="90" src="assets/images/tt2logo.png">

        </a>
        </mat-card-title>
        <section class="example-section">

                <mat-form-field class="example-full-width mr-5-IMP">
                        <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="picker0" [(ngModel)]="startDate" (ngModelChange)="getTabsData($event,'start')" placeholder="Choose a start date" readonly>
                        <mat-datepicker-toggle matSuffix [for]="picker0"></mat-datepicker-toggle>
                        <mat-datepicker #picker0></mat-datepicker>
                    </mat-form-field>
                    <mat-form-field class="example-full-width mr-5-IMP">
                        <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="picker1" [(ngModel)]="endDate" (ngModelChange)="getTabsData($event,'end')" placeholder="Choose a end date" readonly>
                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                    </mat-form-field>


            <mat-form-field class="example-margin mr-5-IMP">
                <mat-select [(ngModel)]="selectedRegion" name='region' placeholder="Territory" (ngModelChange)="onRegionChange(selectedRegion)">
                  <mat-option *ngFor="let region of regions" [value]="region.id | orderBy:region.title">{{region.title}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
          <mat-form-field class="example-margin mr-5-IMP">
            <mat-select [(ngModel)]="selectedAttendanceType" name='attendance' placeholder="Attendance Type" (ngModelChange)="onAttendanceTypeChange(selectedAttendanceType)">
              <mat-option value="ALL">ALL</mat-option>
              <mat-option value="DE">DE</mat-option>
              <mat-option value="TM">TM</mat-option>
            </mat-select>
          </mat-form-field>
          <button mat-raised-button color="primary" (click)="resetFilters()">Reset Filters</button>
            </section>
        </mat-card-content>
     </mat-card>

     <div class="col-md-12">
            <div style="text-align: end">
                <mat-form-field class="example-margin mr-0-IMP">
                    <mat-select name='download' placeholder="Download File" [(ngModel)]="selectedFileType" (ngModelChange)="downloadFile(selectedFileType)" >
                        <mat-option *ngFor="let file of downloadList" [value]="file">
                            <i aria-hidden="true" class="{{file?.icon}}"></i> {{file?.title}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <span>&nbsp;</span>
            </div>
        </div>
     <mat-card>
       <mat-card-content>
           <table class="table">
               <thead>
                   <tr>

                     <th scope="col" (click)="sortIt('territory')">Territory
                       <br>
                       <i class="material-icons arrow">
                            {{getArrowType('territory')}}
                         </i>
                     </th>
                     <th scope="col" (click)="sortIt('visit_date')" >Visit Date
                         <br>
                         <i class="material-icons arrow">
                                {{getArrowType('visit_date')}}
                           </i>
                     </th>

                       <th scope="col" (click)="sortIt('code')">Code
                           <br>
                           <i class="material-icons arrow">
                                {{getArrowType('code')}}
                             </i>
                       </th>
                       <th scope="col" (click)="sortIt('name')">Name
                           <br>
                           <i class="material-icons arrow">
                                {{getArrowType('name')}}
                             </i>
                       </th>
                       <th scope="col" (click)="sortIt('remarks')">Day Start
                           <br>
                           <i class="material-icons arrow">
                                {{getArrowType('remarks')}}
                             </i>
                       </th>
                       <th scope="col" (click)="sortIt('work_type')">Work Type
                           <br>
                           <i class="material-icons arrow">
                                {{getArrowType('work_type')}}
                             </i>
                       </th>

                       <th>Action
                           <br>
                           <i class="material-icons arrow">
                               </i>
                       </th>
                   </tr>
               </thead>
               <tbody>
                   <ng-container *ngFor="let item of attendanceList |  orderBy: sortBy : sortOrder ">
                       <tr>

                           <td>{{item.territory}}</td>
                           <td>{{item.visit_date}}</td>
                           <td>{{item.code}}</td>
                           <td>{{item.name}}</td>
                           <td>{{item.remarks}}</td>
                           <td>{{item.work_type}}</td>

                           <td>
                               <button title="edit" type="button" class="btn btn-primary" (click)="showChildModal(item)">
                                       <i class="fas fa-pencil-alt"></i>
                               </button>

                           </td>

                       </tr>
                   </ng-container>
               </tbody>
           </table>
       </mat-card-content>
     </mat-card>


     <div bsModal #childModal="bs-modal" [config]="{backdrop: 'static',keyboard: false}" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-child-name">
         <div class="modal-dialog ">
             <div class="modal-content">
                 <div class="modal-header">
                     <h4 id="dialog-child-name" class="modal-title pull-left">Edit WorkType</h4>
                     <button type="button" class="close pull-right" aria-label="Close" (click)="hideChildModal()">
                       <span aria-hidden="true">&times;</span>
                      </button>
                 </div>
                 <div class="modal-body">

                     <div class="form-group ">

                         <div class="example-margin example-full-width mr-10-IMP">

                           <select class="form-control" id="workTypeId" [(ngModel)]="selectedWork" name="selectedWork">
                               <option *ngFor="let item of tableData" [value]="item.id">{{item.description}}</option>
                             </select>

                           </div>
                       </div>
                 </div>

                 <div class="modal-footer">
                     <button class="btn btn-primary" (click)="updateWorkType()">
                         Update
                     </button>
                 </div>
             </div>
         </div>
     </div>
